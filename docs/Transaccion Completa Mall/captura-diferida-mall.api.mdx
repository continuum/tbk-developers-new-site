---
id: captura-diferida-mall
title: "Captura Diferida mall"
description: "Para realizar esa captura explícita debe usarse el método Transaction.capture()Transaction.capture() Los SDKs permiten indicar opcionalmente el código de comercio de la transacción a capturar, para soportar la captura en comercios Webpay Plus Mall o Transacción Completa Mall. En comercios sin modalidad Mall no es necesario especificar el código de comercio, ya que se usa el indicado en la configuración.El método Transaction.capture() debe ser invocado siempre indicando el código del comercio que realizó la transacción. En el caso de comercios modalidad Mall, el código debe ser el código de la tienda virtual específica."
sidebar_label: "Captura Diferida mall"
hide_title: true
hide_table_of_contents: true
api: {"tags":["Transaccion Completa Mall"],"description":"Para realizar esa captura explícita debe usarse el método Transaction.capture()Transaction.capture() Los SDKs permiten indicar opcionalmente el código de comercio de la transacción a capturar, para soportar la captura en comercios Webpay Plus Mall o Transacción Completa Mall. En comercios sin modalidad Mall no es necesario especificar el código de comercio, ya que se usa el indicado en la configuración.El método Transaction.capture() debe ser invocado siempre indicando el código del comercio que realizó la transacción. En el caso de comercios modalidad Mall, el código debe ser el código de la tienda virtual específica.","parameters":[{"name":"token","in":"path","required":true,"description":"Token de la transacción","schema":{"type":"string","minimum":64,"maximum":64,"example":"e9d555262db0f989e49d724b4db0b0af367cc415cde41f500a776550fc5fddd3"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"commerce_code":{"type":"string","description":"(Opcional, solo usar en caso Mall) Tienda hija que realizó la transacción. Largo 12.","maxLength":12},"buy_order":{"type":"string","description":"Orden de compra de la transacción que se requiere capturar. Largo máximo 26.","maxLength":26},"authorization_code":{"type":"string","description":"Código de autorización de la transacción que se requiere capturar Largo máximo 6.","maxLength":6},"capture_amount":{"type":"number","description":"Monto que se desea capturar. Largo máximo 17.","format":"float"}},"example":{"commerce_code":"597055555531","buy_order":"415034240","authorization_code":"12345","capture_amount":1000}}}},"required":true},"responses":{"200":{"description":"(OK) La informacion de anulacion o reversa","content":{"application/json":{"schema":{"type":"object","properties":{"token":{"type":"string","description":"Token de la transacción. Largo máximo 64","maxLength":64},"authorization_code":{"type":"string","description":"Código de autorización de la captura diferida. Largo máximo 6","maxLength":6},"authorization_date":{"type":"string","description":"Fecha y hora de la autorización."},"captured_amount":{"type":"number","description":"Monto capturado. Largo máximo 6","format":"float"},"response_code":{"type":"integer","description":"Código de resultado de la captura. Si es exitoso es 0,de lo contrario la captura no fue realizada. Largo máximo 2"}},"example":{"token":"e074d38c628122c63e5c0986368ece22974d6fee1440617d85873b7b4efa48a3","authorization_code":"123456","authorization_date":"2019-03-20T20:18:20Z","captured_amount":1000,"response_code":0}}}}},"400":{"description":"El mensaje JSON es inválido. Puedes ser que no corresponda a un mensaje bien estructurado o que contenga un campo no esperado","content":{"application/json":{"schema":{"type":"object","properties":{"error_message":{"type":"string","example":"token is required"}}}}}},"401":{"description":"No autorizado. API Key y/o API Secret inválidos"},"404":{"description":"La transacción no ha sido encontrada"},"405":{"description":"Método no permitido"},"406":{"description":"No fue posible procesar la respuesta en el formato que el cliente indica"},"415":{"description":"Tipo de mensaje no permitido"},"422":{"description":"El requerimiento no ha podido ser procesado ya sea por validaciones de datos o por lógica de negocios"},"500":{"description":"Ha ocurrido un error inesperado"}},"method":"put","path":"/rswebpaytransaction/api/webpay/v1.2/transactions/{token}/capture","servers":[{"url":"https://webpay3gint.transbank.cl"}],"security":[{"tbkApiKeyId":[],"tbkApiKeySecret":[]}],"securitySchemes":{"tbkApiKeyId":{"type":"apiKey","name":"Tbk-Api-Key-Id","in":"header","description":"Código de comercio"},"tbkApiKeySecret":{"type":"apiKey","name":"Tbk-Api-Key-Secret","in":"header","description":"LLave secreta"}},"jsonRequestBodyExample":{"commerce_code":"597055555531","buy_order":"415034240","authorization_code":"12345","capture_amount":1000},"info":{"title":"Transacción Completa Mall","description":"Este producto tiene requerimientos comerciales más estrictos que el resto de los productos. No inicies la integración si aún no completan la afiliación comercial..","termsOfService":"https://www.transbankdevelopers.cl/termino-y-condiciones","version":"1.0.0"},"postman":{"name":"Captura Diferida mall","description":{"content":"Para realizar esa captura explícita debe usarse el método Transaction.capture()Transaction.capture() Los SDKs permiten indicar opcionalmente el código de comercio de la transacción a capturar, para soportar la captura en comercios Webpay Plus Mall o Transacción Completa Mall. En comercios sin modalidad Mall no es necesario especificar el código de comercio, ya que se usa el indicado en la configuración.El método Transaction.capture() debe ser invocado siempre indicando el código del comercio que realizó la transacción. En el caso de comercios modalidad Mall, el código debe ser el código de la tienda virtual específica.","type":"text/plain"},"url":{"path":["rswebpaytransaction","api","webpay","v1.2","transactions",":token","capture"],"host":["{{baseUrl}}"],"query":[],"variable":[{"disabled":false,"description":{"content":"(Required) Token de la transacción","type":"text/plain"},"type":"any","value":"","key":"token"}]},"header":[{"key":"Content-Type","value":"application/json"},{"key":"Accept","value":"application/json"}],"method":"PUT","body":{"mode":"raw","raw":"\"\"","options":{"raw":{"language":"json"}}}}}
sidebar_class_name: "put api-method"
info_path: docs/Transaccion Completa Mall/transaccion-completa-mall
custom_edit_url: null
---

import ApiTabs from "@theme/ApiTabs";
import MimeTabs from "@theme/MimeTabs";
import ParamsItem from "@theme/ParamsItem";
import ResponseSamples from "@theme/ResponseSamples";
import SchemaItem from "@theme/SchemaItem";
import SchemaTabs from "@theme/SchemaTabs";
import DiscriminatorTabs from "@theme/DiscriminatorTabs";
import TabItem from "@theme/TabItem";

## Captura Diferida mall



Para realizar esa captura explícita debe usarse el método Transaction.capture()Transaction.capture() Los SDKs permiten indicar opcionalmente el código de comercio de la transacción a capturar, para soportar la captura en comercios Webpay Plus Mall o Transacción Completa Mall. En comercios sin modalidad Mall no es necesario especificar el código de comercio, ya que se usa el indicado en la configuración.El método Transaction.capture() debe ser invocado siempre indicando el código del comercio que realizó la transacción. En el caso de comercios modalidad Mall, el código debe ser el código de la tienda virtual específica.

<details style={{"marginBottom":"1rem"}} data-collapsed={false} open={true}><summary style={{}}><strong>Path Parameters</strong></summary><div><ul><ParamsItem className={"paramsItem"} param={{"name":"token","in":"path","required":true,"description":"Token de la transacción","schema":{"type":"string","minimum":64,"maximum":64,"example":"e9d555262db0f989e49d724b4db0b0af367cc415cde41f500a776550fc5fddd3"}}}></ParamsItem></ul></div></details><MimeTabs><TabItem label={"application/json"} value={"application/json-schema"}><details style={{}} data-collapsed={false} open={true}><summary style={{"textAlign":"left"}}><strong>Request Body</strong><strong style={{"fontSize":"var(--ifm-code-font-size)","color":"var(--openapi-required)"}}> required</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"commerce_code"} required={false} deprecated={undefined} schemaDescription={"(Opcional, solo usar en caso Mall) Tienda hija que realizó la transacción. Largo 12."} schemaName={"string"} qualifierMessage={"**Possible values:** `<= 12 characters`"} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"buy_order"} required={false} deprecated={undefined} schemaDescription={"Orden de compra de la transacción que se requiere capturar. Largo máximo 26."} schemaName={"string"} qualifierMessage={"**Possible values:** `<= 26 characters`"} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"authorization_code"} required={false} deprecated={undefined} schemaDescription={"Código de autorización de la transacción que se requiere capturar Largo máximo 6."} schemaName={"string"} qualifierMessage={"**Possible values:** `<= 6 characters`"} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"capture_amount"} required={false} deprecated={undefined} schemaDescription={"Monto que se desea capturar. Largo máximo 17."} schemaName={"float"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem></ul></details></TabItem></MimeTabs><div><ApiTabs><TabItem label={"200"} value={"200"}><div>

(OK) La informacion de anulacion o reversa

</div><div><MimeTabs schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs><TabItem label={"Schema"} value={"Schema"}><details style={{}} data-collapsed={false} open={true}><summary style={{"textAlign":"left"}}><strong>Schema</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"token"} required={false} deprecated={undefined} schemaDescription={"Token de la transacción. Largo máximo 64"} schemaName={"string"} qualifierMessage={"**Possible values:** `<= 64 characters`"} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"authorization_code"} required={false} deprecated={undefined} schemaDescription={"Código de autorización de la captura diferida. Largo máximo 6"} schemaName={"string"} qualifierMessage={"**Possible values:** `<= 6 characters`"} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"authorization_date"} required={false} deprecated={undefined} schemaDescription={"Fecha y hora de la autorización."} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"captured_amount"} required={false} deprecated={undefined} schemaDescription={"Monto capturado. Largo máximo 6"} schemaName={"float"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"response_code"} required={false} deprecated={undefined} schemaDescription={"Código de resultado de la captura. Si es exitoso es 0,de lo contrario la captura no fue realizada. Largo máximo 2"} schemaName={"integer"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"token\": \"e074d38c628122c63e5c0986368ece22974d6fee1440617d85873b7b4efa48a3\",\n  \"authorization_code\": \"123456\",\n  \"authorization_date\": \"2019-03-20T20:18:20Z\",\n  \"captured_amount\": 1000,\n  \"response_code\": 0\n}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem><TabItem label={"400"} value={"400"}><div>

El mensaje JSON es inválido. Puedes ser que no corresponda a un mensaje bien estructurado o que contenga un campo no esperado

</div><div><MimeTabs schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs><TabItem label={"Schema"} value={"Schema"}><details style={{}} data-collapsed={false} open={true}><summary style={{"textAlign":"left"}}><strong>Schema</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"error_message"} required={false} deprecated={undefined} schemaDescription={undefined} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"error_message\": \"token is required\"\n}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem><TabItem label={"401"} value={"401"}><div>

No autorizado. API Key y/o API Secret inválidos

</div><div></div></TabItem><TabItem label={"404"} value={"404"}><div>

La transacción no ha sido encontrada

</div><div></div></TabItem><TabItem label={"405"} value={"405"}><div>

Método no permitido

</div><div></div></TabItem><TabItem label={"406"} value={"406"}><div>

No fue posible procesar la respuesta en el formato que el cliente indica

</div><div></div></TabItem><TabItem label={"415"} value={"415"}><div>

Tipo de mensaje no permitido

</div><div></div></TabItem><TabItem label={"422"} value={"422"}><div>

El requerimiento no ha podido ser procesado ya sea por validaciones de datos o por lógica de negocios

</div><div></div></TabItem><TabItem label={"500"} value={"500"}><div>

Ha ocurrido un error inesperado

</div><div></div></TabItem></ApiTabs></div>
      