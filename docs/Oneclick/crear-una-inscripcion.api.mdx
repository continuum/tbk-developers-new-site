---
id: crear-una-inscripcion
title: "Crear una inscripción"
description: "Permite comenzar con la inscripción de de la tarjeta del usuario. Retorna como respuesta un token, que representa la inscripción, y una URL (urlWebpay). El usuario debe ser redireccionado a urlWebpay, enviando como parámetro TBK_TOKEN el token recibido (Puede ser una redirección por POST o GET). Nota que a diferencia de Webpay Plus, donde el parámetro se llama token_ws, en Oneclick el parámetro se llama TBK_TOKEN. Un mismo username solo puede tener una tarjeta inscrita en tu comercio. Si eventualmente se solicita una nueva inscripción a un username previamente registrado, al finalizar la nueva inscripción el tbk_user de la tarjeta anterior será inválido. Como recomendación, si un usuario en tu sistema ya tiene una tarjeta inscrita, no debería poder volver a inscribir una nueva a menos que elimine la anterior."
sidebar_label: "Crear una inscripción"
hide_title: true
hide_table_of_contents: true
api: {"tags":["Oneclick Mall"],"description":"Permite comenzar con la inscripción de de la tarjeta del usuario. Retorna como respuesta un token, que representa la inscripción, y una URL (urlWebpay). El usuario debe ser redireccionado a urlWebpay, enviando como parámetro TBK_TOKEN el token recibido (Puede ser una redirección por POST o GET). Nota que a diferencia de Webpay Plus, donde el parámetro se llama token_ws, en Oneclick el parámetro se llama TBK_TOKEN. Un mismo username solo puede tener una tarjeta inscrita en tu comercio. Si eventualmente se solicita una nueva inscripción a un username previamente registrado, al finalizar la nueva inscripción el tbk_user de la tarjeta anterior será inválido. Como recomendación, si un usuario en tu sistema ya tiene una tarjeta inscrita, no debería poder volver a inscribir una nueva a menos que elimine la anterior.","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"username":{"type":"string","description":"Identificador del usuario registrado en el comercio. Largo máximo 40.","maxLength":40},"email":{"type":"string","description":"Email del usuario registrado en el comercio. Largo máximo 100.","maxLength":100},"response_url":{"type":"string","description":"URL del comercio a la cual Webpay redireccionará posterior al proceso de inscripción Largo máximo 255.","maxLength":255}},"example":{"username":"juanperez","email":"juan.perez@gmail.com","response_url":"http://www.comercio.cl/return_inscription"}}}},"required":true},"responses":{"200":{"description":"(OK) Se creo una inscripcion correctamente","content":{"application/json":{"schema":{"type":"object","description":"Una vez que se llama a este endpoint, el usuario debe ser redireccionado vía POST a urlInscriptionForm con parámetro TBK_TOKEN igual al token.","properties":{"token":{"type":"string","description":"Identificador, único, del proceso de inscripción. Largo 64.","maxLength":64},"url_webpay":{"type":"string","description":"URL de Webpay para iniciar la inscripción. Largo 255.","maxLength":255}},"example":{"token":"e128a9c24c0a3cbc09223973327b97c8c474f6b74be509196cce4caf162a016a","url_webpay":"https://webpay3g.transbank.cl/webpayserver/bp_inscription.cgi"}}}}},"400":{"description":"El mensaje JSON es inválido. Puedes ser que no corresponda a un mensaje bien estructurado o que contenga un campo no esperado","content":{"application/json":{"schema":{"type":"object","properties":{"error_message":{"type":"string","example":"token is required"}}}}}},"401":{"description":"No autorizado. API Key y/o API Secret inválidos"},"404":{"description":"La transacción no ha sido encontrada"},"405":{"description":"Método no permitido"},"406":{"description":"No fue posible procesar la respuesta en el formato que el cliente indica"},"415":{"description":"Tipo de mensaje no permitido"},"422":{"description":"El requerimiento no ha podido ser procesado ya sea por validaciones de datos o por lógica de negocios"},"500":{"description":"Ha ocurrido un error inesperado"}},"method":"post","path":"/rswebpaytransaction/api/oneclick/v1.2/inscriptions","servers":[{"url":"https://webpay3gint.transbank.cl"}],"security":[{"tbkApiKeyId":[],"tbkApiKeySecret":[]}],"securitySchemes":{"tbkApiKeyId":{"type":"apiKey","name":"Tbk-Api-Key-Id","in":"header","description":"Código de comercio"},"tbkApiKeySecret":{"type":"apiKey","name":"Tbk-Api-Key-Secret","in":"header","description":"LLave secreta"}},"jsonRequestBodyExample":{"username":"juanperez","email":"juan.perez@gmail.com","response_url":"http://www.comercio.cl/return_inscription"},"info":{"title":"API Oneclick Mall","description":"La modalidad de pago Oneclick permite al tarjetahabiente realizar pagos en el comercio sin la necesidad de ingresar cada vez información de la tarjeta de crédito al momento de realizar la compra. El modelo de pago contempla un proceso previo de inscripción o enrolamiento del tarjetahabiente, a través del comercio, que desee utilizar el servicio. Este tipo de pago facilita la venta, disminuye el tiempo de la transacción y reduce los riesgos de ingreso erróneo de los datos del medio de pago.\nEl proceso de integración con Oneclick consiste en desarrollar por parte del comercio las llamadas a los servicios web dispuestos por Transbank para la inscripción de los tarjetahabientes, así como para la realización de los pagos.","termsOfService":"https://www.transbankdevelopers.cl/termino-y-condiciones","version":"1.0.0"},"postman":{"name":"Crear una inscripción","description":{"content":"Permite comenzar con la inscripción de de la tarjeta del usuario. Retorna como respuesta un token, que representa la inscripción, y una URL (urlWebpay). El usuario debe ser redireccionado a urlWebpay, enviando como parámetro TBK_TOKEN el token recibido (Puede ser una redirección por POST o GET). Nota que a diferencia de Webpay Plus, donde el parámetro se llama token_ws, en Oneclick el parámetro se llama TBK_TOKEN. Un mismo username solo puede tener una tarjeta inscrita en tu comercio. Si eventualmente se solicita una nueva inscripción a un username previamente registrado, al finalizar la nueva inscripción el tbk_user de la tarjeta anterior será inválido. Como recomendación, si un usuario en tu sistema ya tiene una tarjeta inscrita, no debería poder volver a inscribir una nueva a menos que elimine la anterior.","type":"text/plain"},"url":{"path":["rswebpaytransaction","api","oneclick","v1.2","inscriptions"],"host":["{{baseUrl}}"],"query":[],"variable":[]},"header":[{"key":"Content-Type","value":"application/json"},{"key":"Accept","value":"application/json"}],"method":"POST","body":{"mode":"raw","raw":"\"\"","options":{"raw":{"language":"json"}}}}}
sidebar_class_name: "post api-method"
info_path: docs/Oneclick/api-oneclick-mall
custom_edit_url: null
---

import ApiTabs from "@theme/ApiTabs";
import MimeTabs from "@theme/MimeTabs";
import ParamsItem from "@theme/ParamsItem";
import ResponseSamples from "@theme/ResponseSamples";
import SchemaItem from "@theme/SchemaItem";
import SchemaTabs from "@theme/SchemaTabs";
import DiscriminatorTabs from "@theme/DiscriminatorTabs";
import TabItem from "@theme/TabItem";

## Crear una inscripción



Permite comenzar con la inscripción de de la tarjeta del usuario. Retorna como respuesta un token, que representa la inscripción, y una URL (urlWebpay). El usuario debe ser redireccionado a urlWebpay, enviando como parámetro TBK_TOKEN el token recibido (Puede ser una redirección por POST o GET). Nota que a diferencia de Webpay Plus, donde el parámetro se llama token_ws, en Oneclick el parámetro se llama TBK_TOKEN. Un mismo username solo puede tener una tarjeta inscrita en tu comercio. Si eventualmente se solicita una nueva inscripción a un username previamente registrado, al finalizar la nueva inscripción el tbk_user de la tarjeta anterior será inválido. Como recomendación, si un usuario en tu sistema ya tiene una tarjeta inscrita, no debería poder volver a inscribir una nueva a menos que elimine la anterior.

<MimeTabs><TabItem label={"application/json"} value={"application/json-schema"}><details style={{}} data-collapsed={false} open={true}><summary style={{"textAlign":"left"}}><strong>Request Body</strong><strong style={{"fontSize":"var(--ifm-code-font-size)","color":"var(--openapi-required)"}}> required</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"username"} required={false} deprecated={undefined} schemaDescription={"Identificador del usuario registrado en el comercio. Largo máximo 40."} schemaName={"string"} qualifierMessage={"**Possible values:** `<= 40 characters`"} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"email"} required={false} deprecated={undefined} schemaDescription={"Email del usuario registrado en el comercio. Largo máximo 100."} schemaName={"string"} qualifierMessage={"**Possible values:** `<= 100 characters`"} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"response_url"} required={false} deprecated={undefined} schemaDescription={"URL del comercio a la cual Webpay redireccionará posterior al proceso de inscripción Largo máximo 255."} schemaName={"string"} qualifierMessage={"**Possible values:** `<= 255 characters`"} defaultValue={undefined}></SchemaItem></ul></details></TabItem></MimeTabs><div><ApiTabs><TabItem label={"200"} value={"200"}><div>

(OK) Se creo una inscripcion correctamente

</div><div><MimeTabs schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs><TabItem label={"Schema"} value={"Schema"}><details style={{}} data-collapsed={false} open={true}><summary style={{"textAlign":"left"}}><strong>Schema</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"token"} required={false} deprecated={undefined} schemaDescription={"Identificador, único, del proceso de inscripción. Largo 64."} schemaName={"string"} qualifierMessage={"**Possible values:** `<= 64 characters`"} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"url_webpay"} required={false} deprecated={undefined} schemaDescription={"URL de Webpay para iniciar la inscripción. Largo 255."} schemaName={"string"} qualifierMessage={"**Possible values:** `<= 255 characters`"} defaultValue={undefined}></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"token\": \"e128a9c24c0a3cbc09223973327b97c8c474f6b74be509196cce4caf162a016a\",\n  \"url_webpay\": \"https://webpay3g.transbank.cl/webpayserver/bp_inscription.cgi\"\n}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem><TabItem label={"400"} value={"400"}><div>

El mensaje JSON es inválido. Puedes ser que no corresponda a un mensaje bien estructurado o que contenga un campo no esperado

</div><div><MimeTabs schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs><TabItem label={"Schema"} value={"Schema"}><details style={{}} data-collapsed={false} open={true}><summary style={{"textAlign":"left"}}><strong>Schema</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"error_message"} required={false} deprecated={undefined} schemaDescription={undefined} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"error_message\": \"token is required\"\n}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem><TabItem label={"401"} value={"401"}><div>

No autorizado. API Key y/o API Secret inválidos

</div><div></div></TabItem><TabItem label={"404"} value={"404"}><div>

La transacción no ha sido encontrada

</div><div></div></TabItem><TabItem label={"405"} value={"405"}><div>

Método no permitido

</div><div></div></TabItem><TabItem label={"406"} value={"406"}><div>

No fue posible procesar la respuesta en el formato que el cliente indica

</div><div></div></TabItem><TabItem label={"415"} value={"415"}><div>

Tipo de mensaje no permitido

</div><div></div></TabItem><TabItem label={"422"} value={"422"}><div>

El requerimiento no ha podido ser procesado ya sea por validaciones de datos o por lógica de negocios

</div><div></div></TabItem><TabItem label={"500"} value={"500"}><div>

Ha ocurrido un error inesperado

</div><div></div></TabItem></ApiTabs></div>
      