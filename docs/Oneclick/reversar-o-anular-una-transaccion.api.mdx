---
id: reversar-o-anular-una-transaccion
title: "Reversar o anular una transacción"
description: "Esta operación permite a todo comercio habilitado, reversar o anular una transacción que fue generada en Oneclick.Puedes realizar un reembolso invocando al método refund(), dependiendo de algunas condiciones correspondera a una Reversa o Anulación. Puedes leer más sobre la anulación en la información del producto Webpay para conocer más detalles y restricciones. www.transbankdevelopers.cl/documentacion/oneclick#capturar-una-transaccion"
sidebar_label: "Reversar o anular una transacción"
hide_title: true
hide_table_of_contents: true
api: {"tags":["Oneclick Mall"],"description":"Esta operación permite a todo comercio habilitado, reversar o anular una transacción que fue generada en Oneclick.Puedes realizar un reembolso invocando al método refund(), dependiendo de algunas condiciones correspondera a una Reversa o Anulación. Puedes leer más sobre la anulación en la información del producto Webpay para conocer más detalles y restricciones. www.transbankdevelopers.cl/documentacion/oneclick#capturar-una-transaccion","parameters":[{"name":"buyOrder","in":"path","required":true,"description":"Orden de compra de la transacción a consultar (se envía en la URL, no en el body).","schema":{"type":"string","example":415034240}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"commerce_code":{"type":"string","description":"Código de comercio hijo. Largo máximo 12.","maxLength":12},"detail_buy_order":{"type":"string","description":"Orden de compra hija de la transacción a reversar o anular. Largo máximo 26.","maxLength":26},"amount":{"type":"number","description":"Monto que se desea anular o reversar de la transacción. Largo máximo 17. Formato número entero para transacciones en peso. Sólo en caso de dólar acepta dos decimales","format":"float"}},"example":{"commerce_code":"597055555542","detail_buy_order":"ordenCompra12345","amount":1000}}}},"required":true},"responses":{"200":{"description":"(OK) La informacion de anulacion o reversa","content":{"application/json":{"schema":{"type":"object","properties":{"type":{"type":"string","description":"Tipo de reembolso, REVERSED o NULLIFIED, si es REVERSED no se devolverán datos de la transacción (authorization code, etc). Largo máximo 10","maxLength":10},"authorization_code":{"type":"string","description":"(Solo si es NULLIFIED) Código de autorización. Largo máximo 6","maxLength":6},"authorization_date":{"type":"string","description":"(Solo si es NULLIFIED) Fecha de la autorización de la transacción.(ISO8601)"},"nullified_amount":{"type":"number","description":"Monto anulado. Largo máximo 17","format":"float"},"balance":{"type":"number","description":"(Solo si es NULLIFIED) Monto restante de la transacción de pago original monto inicial – monto anulado. Largo máximo 17","format":"float"},"response_code":{"type":"integer","description":"(Solo si es NULLIFIED) Código del resultado del pago, donde 0 (cero) es aprobado. Largo máximo 2","maximum":99},"buy_order":{"type":"string","description":"(Solo si es NULLIFIED) Orden de compra generada por el comercio hijo para la transacción de pago. Largo máximo 26."}},"example":{"type":"NULLIFIED","authorization_code":"123456","authorization_date":"2019-03-20T20:18:20Z","nullified_amount":1000,"balance":0,"response_code":0}}}}},"400":{"description":"El mensaje JSON es inválido. Puedes ser que no corresponda a un mensaje bien estructurado o que contenga un campo no esperado","content":{"application/json":{"schema":{"type":"object","properties":{"error_message":{"type":"string","example":"token is required"}}}}}},"401":{"description":"No autorizado. API Key y/o API Secret inválidos"},"404":{"description":"La transacción no ha sido encontrada"},"405":{"description":"Método no permitido"},"406":{"description":"No fue posible procesar la respuesta en el formato que el cliente indica"},"415":{"description":"Tipo de mensaje no permitido"},"422":{"description":"El requerimiento no ha podido ser procesado ya sea por validaciones de datos o por lógica de negocios"},"500":{"description":"Ha ocurrido un error inesperado"}},"method":"post","path":"/rswebpaytransaction/api/oneclick/v1.2/transactions/{buyOrder}/refunds","servers":[{"url":"https://webpay3gint.transbank.cl"}],"security":[{"tbkApiKeyId":[],"tbkApiKeySecret":[]}],"securitySchemes":{"tbkApiKeyId":{"type":"apiKey","name":"Tbk-Api-Key-Id","in":"header","description":"Código de comercio"},"tbkApiKeySecret":{"type":"apiKey","name":"Tbk-Api-Key-Secret","in":"header","description":"LLave secreta"}},"jsonRequestBodyExample":{"commerce_code":"597055555542","detail_buy_order":"ordenCompra12345","amount":1000},"info":{"title":"API Oneclick Mall","description":"La modalidad de pago Oneclick permite al tarjetahabiente realizar pagos en el comercio sin la necesidad de ingresar cada vez información de la tarjeta de crédito al momento de realizar la compra. El modelo de pago contempla un proceso previo de inscripción o enrolamiento del tarjetahabiente, a través del comercio, que desee utilizar el servicio. Este tipo de pago facilita la venta, disminuye el tiempo de la transacción y reduce los riesgos de ingreso erróneo de los datos del medio de pago.\nEl proceso de integración con Oneclick consiste en desarrollar por parte del comercio las llamadas a los servicios web dispuestos por Transbank para la inscripción de los tarjetahabientes, así como para la realización de los pagos.","termsOfService":"https://www.transbankdevelopers.cl/termino-y-condiciones","version":"1.0.0"},"postman":{"name":"Reversar o anular una transacción","description":{"content":"Esta operación permite a todo comercio habilitado, reversar o anular una transacción que fue generada en Oneclick.Puedes realizar un reembolso invocando al método refund(), dependiendo de algunas condiciones correspondera a una Reversa o Anulación. Puedes leer más sobre la anulación en la información del producto Webpay para conocer más detalles y restricciones. www.transbankdevelopers.cl/documentacion/oneclick#capturar-una-transaccion","type":"text/plain"},"url":{"path":["rswebpaytransaction","api","oneclick","v1.2","transactions",":buyOrder","refunds"],"host":["{{baseUrl}}"],"query":[],"variable":[{"disabled":false,"description":{"content":"(Required) Orden de compra de la transacción a consultar (se envía en la URL, no en el body).","type":"text/plain"},"type":"any","value":"","key":"buyOrder"}]},"header":[{"key":"Content-Type","value":"application/json"},{"key":"Accept","value":"application/json"}],"method":"POST","body":{"mode":"raw","raw":"\"\"","options":{"raw":{"language":"json"}}}}}
sidebar_class_name: "post api-method"
info_path: docs/Oneclick/api-oneclick-mall
custom_edit_url: null
---

import ApiTabs from "@theme/ApiTabs";
import MimeTabs from "@theme/MimeTabs";
import ParamsItem from "@theme/ParamsItem";
import ResponseSamples from "@theme/ResponseSamples";
import SchemaItem from "@theme/SchemaItem";
import SchemaTabs from "@theme/SchemaTabs";
import DiscriminatorTabs from "@theme/DiscriminatorTabs";
import TabItem from "@theme/TabItem";

## Reversar o anular una transacción



Esta operación permite a todo comercio habilitado, reversar o anular una transacción que fue generada en Oneclick.Puedes realizar un reembolso invocando al método refund(), dependiendo de algunas condiciones correspondera a una Reversa o Anulación. Puedes leer más sobre la anulación en la información del producto Webpay para conocer más detalles y restricciones. www.transbankdevelopers.cl/documentacion/oneclick#capturar-una-transaccion

<details style={{"marginBottom":"1rem"}} data-collapsed={false} open={true}><summary style={{}}><strong>Path Parameters</strong></summary><div><ul><ParamsItem className={"paramsItem"} param={{"name":"buyOrder","in":"path","required":true,"description":"Orden de compra de la transacción a consultar (se envía en la URL, no en el body).","schema":{"type":"string","example":415034240}}}></ParamsItem></ul></div></details><MimeTabs><TabItem label={"application/json"} value={"application/json-schema"}><details style={{}} data-collapsed={false} open={true}><summary style={{"textAlign":"left"}}><strong>Request Body</strong><strong style={{"fontSize":"var(--ifm-code-font-size)","color":"var(--openapi-required)"}}> required</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"commerce_code"} required={false} deprecated={undefined} schemaDescription={"Código de comercio hijo. Largo máximo 12."} schemaName={"string"} qualifierMessage={"**Possible values:** `<= 12 characters`"} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"detail_buy_order"} required={false} deprecated={undefined} schemaDescription={"Orden de compra hija de la transacción a reversar o anular. Largo máximo 26."} schemaName={"string"} qualifierMessage={"**Possible values:** `<= 26 characters`"} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"amount"} required={false} deprecated={undefined} schemaDescription={"Monto que se desea anular o reversar de la transacción. Largo máximo 17. Formato número entero para transacciones en peso. Sólo en caso de dólar acepta dos decimales"} schemaName={"float"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem></ul></details></TabItem></MimeTabs><div><ApiTabs><TabItem label={"200"} value={"200"}><div>

(OK) La informacion de anulacion o reversa

</div><div><MimeTabs schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs><TabItem label={"Schema"} value={"Schema"}><details style={{}} data-collapsed={false} open={true}><summary style={{"textAlign":"left"}}><strong>Schema</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"type"} required={false} deprecated={undefined} schemaDescription={"Tipo de reembolso, REVERSED o NULLIFIED, si es REVERSED no se devolverán datos de la transacción (authorization code, etc). Largo máximo 10"} schemaName={"string"} qualifierMessage={"**Possible values:** `<= 10 characters`"} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"authorization_code"} required={false} deprecated={undefined} schemaDescription={"(Solo si es NULLIFIED) Código de autorización. Largo máximo 6"} schemaName={"string"} qualifierMessage={"**Possible values:** `<= 6 characters`"} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"authorization_date"} required={false} deprecated={undefined} schemaDescription={"(Solo si es NULLIFIED) Fecha de la autorización de la transacción.(ISO8601)"} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"nullified_amount"} required={false} deprecated={undefined} schemaDescription={"Monto anulado. Largo máximo 17"} schemaName={"float"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"balance"} required={false} deprecated={undefined} schemaDescription={"(Solo si es NULLIFIED) Monto restante de la transacción de pago original monto inicial – monto anulado. Largo máximo 17"} schemaName={"float"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"response_code"} required={false} deprecated={undefined} schemaDescription={"(Solo si es NULLIFIED) Código del resultado del pago, donde 0 (cero) es aprobado. Largo máximo 2"} schemaName={"integer"} qualifierMessage={"**Possible values:** `<= 99`"} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"buy_order"} required={false} deprecated={undefined} schemaDescription={"(Solo si es NULLIFIED) Orden de compra generada por el comercio hijo para la transacción de pago. Largo máximo 26."} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"type\": \"NULLIFIED\",\n  \"authorization_code\": \"123456\",\n  \"authorization_date\": \"2019-03-20T20:18:20Z\",\n  \"nullified_amount\": 1000,\n  \"balance\": 0,\n  \"response_code\": 0\n}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem><TabItem label={"400"} value={"400"}><div>

El mensaje JSON es inválido. Puedes ser que no corresponda a un mensaje bien estructurado o que contenga un campo no esperado

</div><div><MimeTabs schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs><TabItem label={"Schema"} value={"Schema"}><details style={{}} data-collapsed={false} open={true}><summary style={{"textAlign":"left"}}><strong>Schema</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"error_message"} required={false} deprecated={undefined} schemaDescription={undefined} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"error_message\": \"token is required\"\n}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem><TabItem label={"401"} value={"401"}><div>

No autorizado. API Key y/o API Secret inválidos

</div><div></div></TabItem><TabItem label={"404"} value={"404"}><div>

La transacción no ha sido encontrada

</div><div></div></TabItem><TabItem label={"405"} value={"405"}><div>

Método no permitido

</div><div></div></TabItem><TabItem label={"406"} value={"406"}><div>

No fue posible procesar la respuesta en el formato que el cliente indica

</div><div></div></TabItem><TabItem label={"415"} value={"415"}><div>

Tipo de mensaje no permitido

</div><div></div></TabItem><TabItem label={"422"} value={"422"}><div>

El requerimiento no ha podido ser procesado ya sea por validaciones de datos o por lógica de negocios

</div><div></div></TabItem><TabItem label={"500"} value={"500"}><div>

Ha ocurrido un error inesperado

</div><div></div></TabItem></ApiTabs></div>
      